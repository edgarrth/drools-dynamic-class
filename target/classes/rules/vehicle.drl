package rules

import java.util.Map;
import com.poc.droolspoc.domain.GenericEntity;
import com.poc.droolspoc.domain.TransformedEntity;

global com.poc.droolspoc.domain.TransformedEntity transformedEntity;

rule "Transform Vehicle"
when
    $input : GenericEntity(type == "vehicle")
then
    Map<String, Object> body = $input.getBody();
    Map<String, Object> transformedResult = new java.util.HashMap<>();
    transformedResult.put("MarcaAuto", body.get("marca"));
    transformedResult.put("ModeloAuto", body.get("modelo"));
    transformedResult.put("AñoMes", body.get("año") + " " + body.get("mes"));
    transformedResult.put("Placa", body.get("matricula"));

    transformedEntity.setResult(transformedResult);
    System.out.println("Vehicle rule executed: " + transformedResult);
end